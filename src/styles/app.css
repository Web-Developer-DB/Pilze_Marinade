
header.hero{
  position: relative;
  background: linear-gradient(180deg, var(--card), color-mix(in oklab, var(--card), transparent 8%));
  border:1px solid var(--hair);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  padding:22px 16px 18px;
  overflow: hidden;
}

header.hero::before, header.hero::after{
  content:""; position:absolute; inset:auto auto -20% -10%;
  width: 240px; height: 240px; filter: blur(30px);
  background: radial-gradient(closest-side, color-mix(in oklab, var(--accent) 60%, transparent), transparent 70%);
  opacity:.55; transform-origin: center; animation: drift 14s ease-in-out infinite;
}
header.hero::after{
  inset:auto -10% -25% auto; width: 260px; height: 260px;
  background: radial-gradient(closest-side, color-mix(in oklab, var(--accent-3) 55%, transparent), transparent 70%);
  animation-duration: 18s;
}

.subtitle{ margin:.15rem 0 .7rem; color:var(--muted); font-size: var(--fs-sm); }

.badges{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 8px; }
.badge{
  display:inline-flex; gap:8px; align-items:center;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  border:1px solid var(--glass-stroke);
  padding:9px 12px;
  border-radius: 999px;
  font-size:.9rem;
  box-shadow: var(--shadow-sm);
  transition: transform .25s ease, box-shadow .25s ease;
}
.badge:hover{ transform: translateY(-2px); box-shadow: var(--shadow-md); }
.badge svg{ width:16px; height:16px; }
.badge:hover svg{ transform-origin: left center; animation: sway 1.4s ease-in-out infinite; }

.chips{ margin-top:14px; display:flex; gap:10px; overflow:auto; -webkit-overflow-scrolling:touch; padding-bottom:2px; }
.chip{ flex:0 0 auto; padding:11px 14px; border-radius:999px; background: var(--chip-bg);
  border:1px solid var(--chip-stroke); color:var(--chip-ink); font-size:.95rem; text-decoration:none;
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
  box-shadow: var(--shadow-sm); font-weight:600;
}
.chip:hover{ transform: translateY(-2px); box-shadow: var(--shadow-md); border-color: color-mix(in oklab, var(--accent) 40%, var(--chip-stroke)); }
.chip:active{ transform: translateY(0); }

section.card{
  background: linear-gradient(180deg, var(--card), color-mix(in oklab, var(--card), transparent 4%));
  border:1px solid var(--hair);
  border-radius: var(--radius-lg);
  padding:20px 16px;
  margin:18px 0;
  box-shadow: var(--shadow-sm);
  transition: box-shadow .3s ease, transform .3s ease;
}
section.card:hover{ box-shadow: var(--shadow-md); transform: translateY(-1px); }
.lead{ color:var(--muted); margin:.45rem 0 .9rem; }

.note, .warn, .danger{
  border-radius: 14px; padding:12px; border:1px solid var(--hair);
  background: linear-gradient(180deg, color-mix(in oklab, #f7fbff, transparent 20%), transparent);
}
.note{ color:#cfe6ff; border-color: color-mix(in oklab, #cfe0ff 70%, var(--hair)); background: linear-gradient(180deg, rgba(26,52,90,.2), transparent); }
.warn{ color:#ffdca8; border-color: color-mix(in oklab, #f1daae 70%, var(--hair)); background: linear-gradient(180deg, rgba(90,67,24,.2), transparent); }
.danger{ color:#ffc2ca; border-color: color-mix(in oklab, #f2c3c3 70%, var(--hair)); background: linear-gradient(180deg, rgba(107,35,44,.18), transparent); }
:root[data-scheme="light"] .note{ color:#2857a8; }
:root[data-scheme="light"] .warn{ color:#7a5b1a; }
:root[data-scheme="light"] .danger{ color:#8a1b1b; }

.tablewrap{ overflow:auto; -webkit-overflow-scrolling:touch; }
table{ width:100%; border-collapse:collapse; font-variant-numeric: tabular-nums; font-size:.97rem; }
th, td{ border:1px solid var(--hair); padding:10px; vertical-align:top; }
thead th{ background: color-mix(in oklab, var(--bg-2), #ffffff 4%); text-align:left; }
tbody tr:nth-child(odd) td{ background: rgba(255,255,255,.02); }
:root[data-scheme="light"] tbody tr:nth-child(odd) td{ background: rgba(0,0,0,.02); }

.formula{ background: linear-gradient(90deg, color-mix(in oklab, #fff 70%, var(--bg-2)), color-mix(in oklab, #fff 90%, var(--bg-2))); border:1px dashed var(--hair); border-radius:12px; padding:8px 10px; display:inline-block; margin:4px 0; }

.gallery{ display:grid; grid-template-columns:1fr; gap:12px; }
.fig{ border:1px solid var(--hair); border-radius:16px; overflow:hidden; background:var(--card); box-shadow: var(--shadow-sm); }
.fig img{ transform: scale(1); transition: transform .5s ease; }
.fig:hover img{ transform: scale(1.03); }
figcaption{ font-size:.88rem; color:var(--muted); padding:10px 12px; }

.bottom-nav{ position:fixed; bottom:12px; left:0; right:0; z-index:50; display:flex; gap:10px; justify-content:center; pointer-events:none; }
.bottom-nav a{ pointer-events:auto; display:inline-flex; align-items:center; gap:8px;
  background: var(--nav-btn-bg); color:var(--nav-btn-ink); text-decoration:none;
  border:1px solid var(--nav-btn-stroke); border-radius:999px; padding:11px 15px;
  box-shadow: var(--shadow-sm); font-size:.96rem; backdrop-filter: blur(var(--glass-blur));
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease; font-weight:600;
}
.bottom-nav a:hover{ transform: translateY(-2px); box-shadow: var(--shadow-md); }
.bottom-nav a svg{ width:18px; height:18px; }

/* Hamburger + Right Drawer */
.hamburger-btn{
  position: fixed; top: 12px; right: 12px; z-index: 120;
  display:inline-flex; align-items:center; justify-content:center;
  width: 44px; height: 44px;
  background: var(--nav-btn-bg);
  color: var(--nav-btn-ink);
  border:1px solid var(--nav-btn-stroke);
  border-radius: 12px;
  box-shadow: var(--shadow-sm);
  backdrop-filter: blur(var(--glass-blur));
  cursor:pointer;
  transition: transform .2s ease, box-shadow .2s ease;
}
.hamburger-btn:hover{ transform: translateY(-1px); box-shadow: var(--shadow-md) }
.hamburger-icon{ width:22px; height:22px; display:block }
.hamburger-icon path{ stroke: currentColor; stroke-width:2; stroke-linecap:round }

.drawer{ position: fixed; inset:0; z-index: 110; pointer-events:none; }
.drawer .overlay{ position: absolute; inset:0; background: rgba(0,0,0,.35); opacity:0; transition: opacity .25s ease; }
.drawer .panel{
  position:absolute; top:0; right:0; height:100%; width:min(86vw, 360px);
  background: var(--card);
  border-left:1px solid var(--hair);
  box-shadow: var(--shadow-lg);
  transform: translateX(100%);
  transition: transform .3s cubic-bezier(.2,.65,.2,1);
  padding:16px 14px;
  display:flex; flex-direction:column; gap:14px;
}
.drawer.open{ pointer-events:auto; }
.drawer.open .overlay{ opacity:1 }
.drawer.open .panel{ transform: translateX(0) }

.drawer .menu-title{ font-family: var(--font-serif); font-size: var(--fs-xl); margin: 4px 2px 8px; color: var(--accent); }
.drawer nav a{ display:block; padding:10px 8px; border-radius: 10px; color: var(--chip-ink); text-decoration:none; border:1px solid var(--chip-stroke);
  background: var(--chip-bg); margin:4px 0; font-weight:600; }
.drawer nav a:hover{ border-color: color-mix(in oklab, var(--accent) 40%, var(--chip-stroke)); }
.drawer .close-row{ display:flex; justify-content:flex-end; }
.drawer .close-btn{ background:transparent; border:none; color:var(--muted); font-size:1.2rem; padding:6px 8px; cursor:pointer }

footer{ text-align:center; color:var(--muted); font-size:.92rem; margin:26px 0 0; }

@media (min-width: 980px){
  .twocol{ display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
  .gallery{ grid-template-columns: repeat(2,1fr); }
}


/* Responsive visibility */
@media (min-width: 980px){
  .hamburger-btn{ display: none; }
}

@media (max-width: 979px){
  .theme-controls{ display: none; }
}
